---
title: HTTP与HTTPS
date: 2021-03-09 17:25:30
tags: 
  - HTTP
  - HTTPS
categories: HTTP协议
---
### HTTP
HTTP协议是超文本传输协议的缩写，英文是Hyper Text Transfer Protocol。它是从WEB服务器传输超文本标记语言(HTML)到本地浏览器的传送协议。
HTTP是一个基于TCP/IP通信协议来传递数据的协议，传输的数据类型为HTML 文件,、图片文件, 查询结果等。
HTTP协议一般用于B/S架构。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。
一次访问网址经历DNS解析服务器IP，三次握手，发送请求，响应请求四个步骤。
三次握手是client端先发送SYN，svr发送ACK+SYN，client端在发送ACK。
HTTP的特点：
1. http协议支持客户端/服务端模式，也是一种请求/响应模式的协议。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。
3. 灵活：HTTP允许传输任意类型的数据对象。传输的类型由Content-Type加以标记。
4. 无连接：限制每次连接只处理一个请求。服务器处理完请求，并收到客户的应答后，即断开连接，但是却不利于客户端与服务器保持会话连接，为了弥补这种不足，产生了两项记录http状态的技术，一个叫做Cookie,一个叫做Session。
5. 无状态：无状态是指协议对于事务处理没有记忆，后续处理需要前面的信息，则必须重传。

### HTTPS
HTTP存在以下问题：
请求信息明文传输，容易被窃听截取。
数据的完整性未校验，容易被篡改
没有验证对方身份，存在冒充危险

HTTPS 协议（HyperText Transfer Protocol over Secure Socket Layer）：一般理解为HTTP+SSL/TLS，通过 SSL证书来验证服务器的身份，并为浏览器和服务器之间的通信进行加密。
SSL（Secure Socket Layer，安全套接字层）：1994年为 Netscape 所研发，SSL 协议位于 TCP/IP 协议与各种应用层协议之间，为数据通讯提供安全支持。
TLS（Transport Layer Security，传输层安全）：其前身是 SSL，它最初的几个版本（SSL 1.0、SSL 2.0、SSL 3.0）
由网景公司开发，1999年从 3.1 开始被 IETF 标准化并改名，发展至今已经有 TLS 1.0、TLS 1.1、TLS 1.2 三个版本。SSL3.0和TLS1.0由于存在安全漏洞，已经很少被使用到。TLS 1.3 改动会比较大，目前还在草案阶段，目前使用最广泛的是TLS 1.1、TLS 1.2。
##### 浏览器在使用HTTPS传输数据的流程是什么？
![img.png](https://doublewxx.github.io/images/img.png)
1. 首先客户端通过URL访问服务器建立SSL连接。
2. 服务端收到客户端请求后，会将网站支持的证书信息（证书中包含公钥）传送一份给客户端。
3. 客户端的服务器开始协商SSL连接的安全等级，也就是信息加密的等级。
4. 客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。
5. 服务器利用自己的私钥解密出会话密钥。
6. 服务器利用会话密钥加密与客户端之间的通信，此时使用的就是对称加密了。密钥只有服务端和客户端存在。
HTTPS的缺点：
1. HTTPS协议多次握手，导致页面的加载时间延长近50%；
2. HTTPS连接缓存不如HTTP高效，会增加数据开销和功耗；
3. 申请SSL证书需要钱，功能越强大的证书费用越高。
4. SSL涉及到的安全算法会消耗 CPU 资源，对服务器资源消耗较大。

##### 关于TCP
TCP 提供一种面向连接的、可靠的字节流服务
在一个 TCP 连接中，仅有两方进行彼此通信。广播和多播不能用于 TCP
TCP 使用校验和，确认和重传机制来保证可靠传输
TCP 给数据分节进行排序，并使用累积确认保证数据的顺序不变和非重复
TCP 使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制


##### 三次握手原因
如果两次握手，不能确定客户端有收到消息，所以可能出现客户端没有收到消息，只有客户端可以向服务端发消息。
四次握手就没必要了，三次就已经两端确认连接了。

##### 四次放手原因
因为TCP是全双工的通信方式，即一方断开连接后，不能向另一方发送数据，但是此时另一方可以向自己发送数据，所以双方断开连接是独立的，所以需要四次。
